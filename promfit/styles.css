/* Windows-ish baseline */
:root{
  --win-bg: #f3f5f6;
  --panel-bg: #ffffff;
  --line: #cfcfcf;
  --line2:#dcdcdc;
  --shadow:#b9b9b9;
  --text:#1f1f1f;
  --muted:#666;
  --sidebar:#e7eaed;
  --sidebar-dark:#565c63;
  --sidebar-border:#a9a9a9;
  --gold:#e1b53a;
  --blue:#1f75cc;
  --link:#1a38d6;
}

*{ box-sizing:border-box; }
html,body{
  height:100%;
  margin:0;
  font-family: "Segoe UI", Tahoma, Arial, sans-serif;
  color:var(--text);
  background:#dfe6ea;
}

/* App window */
.window{
  width:100vw;
  height:100vh;
  margin:0;
  background:var(--win-bg);
  border:1px solid #b5b5b5;
  box-shadow: 0 2px 10px rgba(0,0,0,.10);
  display:flex;
  flex-direction:column;
}

/* Title bar */
.titlebar{
  height:34px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0 8px;
  background:#eaf2f6;
  border-bottom:1px solid #cfd7dc;
}
.title-left{ display:flex; align-items:center; gap:8px; }
.app-icon{
  width:20px;
  height:20px;
  border-radius:3px;
  display:block;
  object-fit:contain;
}
.title-text{ font-size:13px; }

.title-controls{ display:flex; gap:6px; align-items:center; }
.title-controls .btn{
  width:34px; height:22px;
  border-radius:3px;
  border:1px solid transparent;
  background:transparent;
}
.title-controls .btn:hover{ background:#dfe7ee; border-color:#c8d2db; }
.title-controls .close:hover{ background:#e81123; border-color:#d10f1e; }

/* Menu bar */
.menubar{
  height:26px;
  display:flex;
  align-items:center;
  gap:18px;
  padding:0 10px;
  background:#f6f6f6;
  border-bottom:1px solid var(--line);
  font-size:12px;
}
.menu-item{
  color:#111;
  background:none;
  border:none;
  padding:0 6px;
  font:inherit;
  cursor:pointer;
}
.menu-item:focus{
  outline:1px dotted #777;
}
.menu-label{
  padding:0 6px;
  color:#333;
}
.menu-label.menu-action{
  cursor:pointer;
}
.menu-label.menu-action:focus{
  outline:1px dotted #777;
}

/* Toolbar */
.toolbar{
  height:40px;
  display:flex;
  align-items:center;
  gap:12px;
  padding:0 10px;
  background:linear-gradient(#fbfbfb,#f0f0f0);
  border-bottom:1px solid var(--line);
}
.tool-icons{ display:flex; align-items:center; gap:6px; }
.toolico{
  width:32px; height:32px;
  border:none;
  background:linear-gradient(#ffffff,#e9e9e9);
  border-radius:2px;
  padding:0;
  background-repeat:no-repeat;
  background-position:center;
  background-size:22px 22px;
  outline:none;
}
.toolico:focus,
.toolico:focus-visible{ outline:none; }
.toolico.action{
  cursor:pointer;
}

#load-firmware-btn{ background-image:url("icon/new.ico"); }
#load-profile-btn{ background-image:url("icon/load.ico"); }
#save-profile-btn{ background-image:url("icon/save.ico"); }
#reset-all-btn{ background-image:url("icon/default.ico"); }
#custom-info-btn{ background-image:url("icon/setting.ico"); }
#build-btn{ background-image:url("icon/build.ico"); }
.toolsep{
  width:1px; height:32px;
  background:#cfcfcf;
  margin:0 4px;
}

.toolbar-controls{
  display:flex;
  gap:10px;
  align-items:center;
}
.combo{
  height:26px;
  min-width:250px;
  display:flex;
  align-items:center;
  border:1px solid #c6c6c6;
  background:#fff;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.75);
  position:relative;
}
.combo.small{ min-width:200px; }
.combo-select{
  appearance:none;
  border:none;
  background:transparent;
  flex:1;
  height:100%;
  font-size:12px;
  padding:0 8px;
  outline:none;
  width:100%;
  padding-right:26px;
}
.combo-arrow{
  width:26px;
  height:100%;
  display:grid;
  place-items:center;
  border-left:1px solid #c6c6c6;
  background:linear-gradient(#ffffff,#ededed);
  font-size:12px;
  color:#444;
  position:absolute;
  right:0;
  top:0;
  pointer-events:none;
}
.combo-arrow-icon{
  width:8px;
  height:5px;
  display:block;
}

/* Split layout: sidebar + content */
.workarea{
  flex:1;
  display:grid;
  grid-template-columns: minmax(220px, 320px) 1fr;
  min-height:0; /* allow children to scroll */
}

/* Sidebar */
.sidebar{
  background:linear-gradient(#f1f3f5,#e5e8eb);
  border-right:1px solid #bdbdbd;
  padding:6px 0;
  overflow:auto;
}
.nav-item{
  font-size:12px;
  padding:7px 10px;
  border-top:1px solid #f8f8f8;
  border-bottom:1px solid #cfcfcf;
  color:#2b2b2b;
  background:linear-gradient(#f3f3f3,#e6e6e6);
}
.nav-item.active{
  background:linear-gradient(#6b7178,#4f555c);
  color:#fff;
  border-top-color:#6f757c;
  border-bottom-color:#40464d;
}

/* Main content */
.content{
  background:var(--panel-bg);
  position:relative;
  min-width:0;
  min-height:0;
}
.content-scroll{
  height:100%;
  overflow:auto;
  padding:10px 12px 16px 12px;
}

.build-row{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  align-items:center;
  margin-bottom:6px;
}
.build-row label{
  font-weight:600;
}
.build-row input[type="file"],
.build-row input[type="text"]{
  border:1px solid #c9c9c9;
  padding:4px 6px;
  background:#fff;
  font-size:12px;
}
.hidden-file{
  display:none;
}
.file-name{
  border:1px solid #c9c9c9;
  background:#fff;
  padding:4px 6px;
  min-width:200px;
  font-size:12px;
  font-family:"Consolas","Courier New",monospace;
}
.build-row button{
  border:1px solid #6b7178;
  background:linear-gradient(#fefefe,#e7e7e7);
  padding:4px 10px;
  font-size:12px;
  cursor:pointer;
}
.build-check{
  display:flex;
  align-items:center;
  gap:6px;
}

/* Page title "Regions" with twisty */
.page-title{
  display:flex;
  align-items:center;
  gap:8px;
  font-size:18px;
  font-weight:600;
  color:#2c2c2c;
  padding:2px 0 6px 0;
}
.twisty{
  width:0;height:0;
  border-left:6px solid #2e7fcf;
  border-top:5px solid transparent;
  border-bottom:5px solid transparent;
  display:inline-block;
  transform:rotate(90deg);
  margin-right:2px;
}
.page-title .twisty.down{
  transform:rotate(90deg);
}
.gold-rule{
  height:2px;
  background:var(--gold);
  margin:2px 0 12px 0;
}
.gridbox .gold-rule{
  margin:8px 0 6px 0;
}

/* Collapsible groups (Descriptor Region / GbE Region) */
.group{
  border-top:1px solid #d8d8d8;
  margin:0 0 12px 0;
}
.group-summary{
  list-style:none;
  display:flex;
  align-items:center;
  gap:8px;
  padding:8px 0 6px 0;
  font-weight:600;
  font-size:13px;
  color:#2a2a2a;
}
.group-summary::-webkit-details-marker{ display:none; }
details.group > summary .twisty{
  border-left-color:#2e7fcf;
  transform:rotate(90deg);
}
details.group:not([open]) > summary .twisty{
  transform:rotate(0deg);
}

/* Grid box (table look) */
.gridbox{
  border:1px solid #cfcfcf;
  background:#fff;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.7);
  margin:6px 0 10px 24px; /* indented like screenshot */
}
.grid-head{
  display:grid;
  grid-template-columns: 0.5fr 0.25fr 1.25fr;
  background:linear-gradient(#fbfbfb,#efefef);
  border-bottom:1px solid #d6d6d6;
  font-size:12px;
  font-weight:600;
  color:#3a3a3a;
}
.grid-head > div{
  padding:6px 8px;
  border-right:1px solid #e1e1e1;
}
.grid-head > div:last-child{ border-right:none; }

.grid-row{
  display:grid;
  grid-template-columns: 0.5fr 0.25fr 1.25fr;
  font-size:12px;
}
.grid-row .cell.value{
  display:flex;
  flex-direction:column;
  gap:4px;
}
.value-input{
  border:1px solid #c9c9c9;
  padding:4px 6px;
  font-size:12px;
  font-family: "Consolas", "Courier New", monospace;
}
.value-input.hidden-input{
  display:none;
}
.bit-menu{
  margin-top:4px;
}
.bit-menu summary{
  cursor:pointer;
  font-size:11px;
  color:#444;
}
.bit-list{
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap:4px 10px;
  padding:6px 0 4px;
}
.bit-item{
  display:flex;
  gap:6px;
  align-items:center;
  font-size:11px;
}
.value-input.invalid{
  border-color:#d9534f;
  background:#fff2f2;
}
.subfield-menu{
  margin-top:4px;
}
.subfield-menu summary{
  cursor:pointer;
  font-size:11px;
  color:#444;
}
.subfield-list{
  display:flex;
  flex-direction:column;
  gap:0;
  padding:6px 0 4px;
}
.grid-row.subfield-row{
  display:grid;
  grid-template-columns: 0.5fr 0.25fr 1.25fr;
}
.grid-row.subfield-row .cell{
  background:#fbfbfb;
}
.grid-row.subfield-row .cell:first-child{
  padding-left:22px;
}
.grid-row.subfield-row.is-hidden{
  display:none;
}
.subfield-name{
  font-size:11px;
  color:#2f2f2f;
}
.subfield-input{
  border:1px solid #c9c9c9;
  padding:3px 4px;
  font-size:11px;
  font-family: "Consolas", "Courier New", monospace;
  flex:1 1 120px;
  min-width:0;
}
.subfield-input.hidden-input{
  display:none;
}
.subfield-input.invalid{
  border-color:#d9534f;
  background:#fff2f2;
}
.subfield-select{
  flex:1 1 120px;
  min-width:0;
}
.subfield-controls{
  display:flex;
  flex-wrap:wrap;
  gap:6px;
  align-items:center;
  width:100%;
}
.preset-select{
  border:1px solid #c9c9c9;
  padding:3px 4px;
  font-size:11px;
}
.default-btn{
  border:1px solid #c9c9c9;
  background:#f4f4f4;
  padding:2px 6px;
  font-size:11px;
  cursor:pointer;
}
.range-text{
  color:#777;
  font-size:11px;
}
.required-tag{
  color:#b23b2a;
  font-weight:700;
}
.cell{
  padding:6px 8px;
  border-top:1px solid #efefef;
  border-right:1px solid #ededed;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.grid-row:first-of-type .cell{ border-top:none; }
.grid-row .cell:last-child{ border-right:none; }

.cell.value{
  text-align:left;
  color:#111;
}
.cell.help{
  color:#333;
}
.code-hint{
  font-size:11px;
  color:#666;
  font-family: "Consolas", "Courier New", monospace;
}
.grid-row.section .cell{
  background:#f7f7f7;
  font-weight:600;
}

.grid-row.disabled .cell{
  color:#9b9b9b;
}
.grid-row.disabled .cell.help{
  color:#b0b0b0;
}

/* Bottom log pane */
.logpane{
  height:clamp(110px, 18vh, 180px);
  background:#ffffff;
  border-top:2px solid #b9b9b9;
  padding:8px 10px;
  font-size:12px;
  overflow-y:auto;
  overflow-x:hidden;
}
.logline{
  line-height:1.35;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.logline.link{
  color:var(--link);
}

/* Modal */
.modal.hidden{
  display:none;
}
.modal{
  position:fixed;
  inset:0;
  z-index:999;
}
.modal-backdrop{
  position:absolute;
  inset:0;
  background:rgba(30,30,30,0.35);
}
.modal-card{
  position:relative;
  width:min(360px, 90vw);
  margin:12vh auto 0;
  background:#fff;
  border:1px solid #bdbdbd;
  box-shadow:0 10px 24px rgba(0,0,0,0.2);
  padding:12px;
  font-size:12px;
}
.modal-title{
  font-weight:700;
  margin-bottom:8px;
}
.modal-body{
  display:flex;
  flex-direction:column;
  gap:6px;
}
#cc-body{
  white-space:pre-line;
}
#confirm-body{
  white-space:pre-line;
}
.help-body{
  line-height:1.4;
}
.help-body p{
  margin:0;
}
.help-body ul{
  margin:0;
  padding-left:16px;
}
.modal-body input{
  border:1px solid #c9c9c9;
  padding:4px 6px;
  font-size:12px;
}
.modal-actions{
  display:flex;
  justify-content:flex-end;
  gap:8px;
  margin-top:10px;
}
.modal-btn{
  border:1px solid #6b7178;
  background:linear-gradient(#fefefe,#e7e7e7);
  padding:4px 10px;
  font-size:12px;
  cursor:pointer;
}
.modal-btn:focus,
.modal-btn:focus-visible{
  outline:2px solid #1f5c9e;
  outline-offset:2px;
  box-shadow:0 0 0 2px rgba(31,92,158,0.2);
}
.modal-btn.primary{
  background:linear-gradient(#eaf6ff,#d4e8ff);
  border-color:#8fb1d6;
}
.modal-btn.ghost{
  background:#f6f6f6;
}


@media (max-width: 900px){
  .workarea{
    grid-template-columns: minmax(160px, 240px) 1fr;
  }
  .grid-head,
  .grid-row{
    grid-template-columns: 1fr;
  }
  .grid-head > div{
    border-right:none;
  }
  .cell{
    border-right:none;
  }
  .gridbox{
    margin-left:0;
  }
}

/* Scrollbar (optional subtle Windows-like) */
.content-scroll::-webkit-scrollbar{
  width:14px;
}
.content-scroll::-webkit-scrollbar-track{
  background:#f3f3f3;
  border-left:1px solid #d7d7d7;
}
.content-scroll::-webkit-scrollbar-thumb{
  background:#c9c9c9;
  border:3px solid #f3f3f3;
  border-radius:8px;
}
